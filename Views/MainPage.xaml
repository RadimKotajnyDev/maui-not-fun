<?xml version="1.0" encoding="utf-8"?>

<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="MauiMacApp.Views.MainPage">

    <VerticalStackLayout
        Spacing="5"
        Padding="5,0"
        VerticalOptions="Start">
        
        <HorizontalStackLayout HorizontalOptions="Start" Spacing="20">
            <Button
                x:Name="SaveBtn"
                Text="Save"
                SemanticProperties.Hint="Opens a file save dialog"
                Clicked="OnSaveClicked"
                WidthRequest="200"
                HeightRequest="50" />
            
            <Button
                x:Name="LoadBtn"
                Text="Load"
                SemanticProperties.Hint="Opens a folder picker"
                Clicked="OnLoadClicked"
                WidthRequest="200"
                HeightRequest="50" />

            <Button
                x:Name="EditBtn"
                Text="Edit"
                SemanticProperties.Hint="Opens an edit dialog"
                Clicked="OnEditClicked"
                WidthRequest="200"
                HeightRequest="50"
                IsEnabled="False" />
        </HorizontalStackLayout>
        
        <Border Stroke="#999" StrokeThickness="1" Padding="0" Margin="0,10,0,0">
            <VerticalStackLayout Spacing="0">
                <Grid ColumnDefinitions="*,Auto,*,Auto,*" Padding="10,8">
                    <Label Grid.Column="0" Text="Name" FontAttributes="Bold" Margin="5,0"/>
                    <Label Grid.Column="2" Text="Author" FontAttributes="Bold" Margin="5,0"/>
                    <Label Grid.Column="4" Text="Genre" FontAttributes="Bold" Margin="5,0"/>
                    <BoxView Grid.Column="1" WidthRequest="1" BackgroundColor="#999" />
                    <BoxView Grid.Column="3" WidthRequest="1" BackgroundColor="#999" />
                </Grid>
                <BoxView HeightRequest="1" BackgroundColor="#999" />

                <CollectionView x:Name="MusicCollection"
                                ItemsSource="{Binding MyItems}"
                                SelectionMode="Single"
                                SelectionChanged="OnSelectionChanged">
                    <CollectionView.ItemsLayout>
                        <LinearItemsLayout Orientation="Vertical" />
                    </CollectionView.ItemsLayout>
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Border Stroke="#CCC" StrokeThickness="1" Padding="0">
                                <VisualStateManager.VisualStateGroups>
                                    <VisualStateGroup Name="CommonStates">
                                        <VisualState Name="Normal">
                                            <VisualState.Setters>
                                                <Setter Property="Stroke" Value="#CCC" />
                                            </VisualState.Setters>
                                        </VisualState>
                                        <VisualState Name="Selected">
                                            <VisualState.Setters>
                                                <Setter Property="BackgroundColor" Value="#62109F" />
                                                <Setter Property="Stroke" Value="#4A90E2" />
                                            </VisualState.Setters>
                                        </VisualState>
                                    </VisualStateGroup>
                                </VisualStateManager.VisualStateGroups>
                                <Grid ColumnDefinitions="*,Auto,*,Auto,*" Padding="10,8">
                                    <Label Grid.Column="0" Text="{Binding Name}" Margin="5,0" />
                                    <Label Grid.Column="2" Text="{Binding Author}" Margin="5,0" />
                                    <Label Grid.Column="4" Text="{Binding Genre}" Margin="5,0" />
                                    
                                    <BoxView Grid.Column="1" WidthRequest="1" BackgroundColor="#DDD" />
                                    <BoxView Grid.Column="3" WidthRequest="1" BackgroundColor="#DDD" />
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </VerticalStackLayout>
        </Border>

        <Label
            x:Name="StatusLabel"
            Text="Ready"
            FontSize="18"
            HorizontalOptions="Center"
            Margin="0,20,0,20" />

        <Label
            x:Name="ResultLabel"
            Text=""
            FontSize="14"
            HorizontalOptions="Center"
            Margin="0,20,0,0"
            LineBreakMode="WordWrap"
            MaxLines="5" />

    </VerticalStackLayout>

</ContentPage>